mark_prisoner = { # Move prisoner interaction for Baseborn - Edited - Sleepingcafe - 16/6 - Huge help from Robin
    category = interaction_category_hostile
    icon = prison
    common_interaction = yes
    auto_accept = yes
    use_diplomatic_range = no

    is_shown = {
        scope:recipient = { 
            is_imprisoned = yes 
            is_imprisoned_by = scope:actor
        }
        scope:actor = {
            is_ai = no
        }
    }

    on_accept = {
        scope:recipient = {
            set_variable = {
                name = prisoner_to_transfer
            }
        }
    }

}

transfer_prisoner = {
    category = interaction_category_hostile
    icon = prison
    common_interaction = yes
    auto_accept = yes
    use_diplomatic_range = no

    is_shown = {
        NOT = { 
            scope:recipient = scope:actor
            scope:recipient = {
                is_imprisoned_by = scope:actor
            }
        }
    }

   on_accept = {
        scope:actor = {
            every_prisoner = {
                limit = {
                    has_variable = prisoner_to_transfer
                }
                save_scope_as = transfered_prisoner
                hidden_effect = {
                    release_from_prison = yes
                }
            }
        }
        scope:recipient = {
            imprison = {
                target = scope:transfered_prisoner
                type = dungeon
            }
        }
        scope:transfered_prisoner = {
            remove_variable = prisoner_to_transfer
        }
   } 
}